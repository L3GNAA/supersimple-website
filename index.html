<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Angel Contreras — Netflix-style</title>
  <meta name="color-scheme" content="dark">
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#141414; --ink:#fff; --muted:#e5e5e5; --ink-2:#b3b3b3;
      --panel:#000; --accent:#E50914; --rail:#1a1a1a; --thumb:#4a4a4a;
      --ring:rgba(255,255,255,.14);
    }
    *{box-sizing:border-box; margin:0; padding:0}
    html,body{height:100%; overflow-x:hidden}
    /* keep the no-vertical-scroll behavior */
    html{scroll-behavior:auto; overflow-y:hidden; position:relative}
    body{
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;
      background:var(--bg); color:var(--ink); position:relative;
    }
    .nf{
      font-family:"Netflix Sans","Bebas Neue",system-ui,-apple-system,"Segoe UI","Helvetica Neue",Arial,sans-serif;
      letter-spacing:.015em;
      text-transform:uppercase;
    }
    .netflix-intro{
      position:fixed; inset:0; display:grid; place-items:center;
      background:#000; z-index:10000; animation:hideIntro .5s ease 2.6s forwards;
      cursor:pointer; /* intro is clickable */
    }
    .netflix-logo{ 
      display:grid; place-items:center; 
      animation:logoZoom 1.8s ease both; 
    }
    .intro-text{
      font-family:"Netflix Sans","Bebas Neue",system-ui,-apple-system,"Segoe UI","Helvetica Neue",Arial,sans-serif;
      font-weight:900;
      font-size:clamp(48px, 12vw, 140px);
      letter-spacing:.15em;
      text-transform:uppercase;
      color:#E50914;
      margin:0;
      text-shadow:
        0 0 20px rgba(229,9,20,.6),
        0 0 40px rgba(229,9,20,.4),
        0 0 60px rgba(229,9,20,.2);
      position:relative;
      display:flex;
      justify-content:center;
      align-items:baseline;
    }
    .intro-text span{ display:inline-block; position:relative; }
    .intro-text span:nth-child(1) { transform:translateY(30px); }
    .intro-text span:nth-child(2) { transform:translateY(20px); }
    .intro-text span:nth-child(3) { transform:translateY(12px); }
    .intro-text span:nth-child(4) { transform:translateY(7px); }
    .intro-text span:nth-child(5) { transform:translateY(3px); }
    .intro-text span:nth-child(6) { transform:translateY(1px); }
    .intro-text span:nth-child(7),
    .intro-text span:nth-child(8) { transform:translateY(0px); }
    .intro-text span:nth-child(9) { transform:translateY(1px); }
    .intro-text span:nth-child(10) { transform:translateY(3px); }
    .intro-text span:nth-child(11) { transform:translateY(7px); }
    .intro-text span:nth-child(12) { transform:translateY(12px); }
    .intro-text span:nth-child(13) { transform:translateY(20px); }
    .intro-text span:nth-child(14) { transform:translateY(30px); }
    .intro-text span:nth-child(15) { transform:translateY(40px); }
    @keyframes logoZoom{ 
      0%{transform:scale(.6);opacity:0}
      55%{transform:scale(1.12);opacity:1}
      100%{transform:scale(1)}
    }
    @keyframes hideIntro{to{opacity:0; visibility:hidden}}
    .profiles{
      position:fixed; inset:0; display:none; align-items:center; justify-content:center;
      background:#000; z-index:9000;
    }
    .profiles.show{ display:flex; animation:fadeIn .35s ease both; }
    .profiles-wrap{ width:min(1000px,92vw); margin:auto; text-align:center; }
    .profiles h2{
      font:900 clamp(20px,3.2vw,32px)/1.2 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:#fff; margin:0 0 22px;
    }
    .grid{
      display:grid; gap:22px;
      grid-template-columns: repeat(3, minmax(0,1fr));
      place-items:center;
    }
    @media (max-width: 680px){
      .grid{ grid-template-columns: repeat(3, minmax(0,1fr)); gap:14px; }
    }
    .tile{
      display:grid; gap:10px; place-items:center; cursor:pointer; text-decoration:none;
      user-select:none; outline:none; background:transparent; border:0;
    }
    .tile.disabled{ cursor:not-allowed; }
    .avatar{
      width:min(32vw,180px); height:min(32vw,180px);
      border-radius:10px; overflow:hidden;
      border:2px solid transparent; box-shadow:0 0 0 0 rgba(255,255,255,.0);
      transition:transform .12s ease, border-color .12s ease, box-shadow .12s ease, filter .12s ease;
      display:grid; place-items:center;
    }
    .tile:not(.disabled):focus .avatar,
    .tile:not(.disabled):hover .avatar{
      transform:scale(1.04);
      border-color:#fff;
      box-shadow:0 0 0 4px rgba(255,255,255,.12);
      filter:brightness(1.06);
    }
    .tile.disabled .avatar{ filter:grayscale(1) brightness(.75); border-color:transparent; }
    .label{
      font-weight:800; color:#a3a3a3; letter-spacing:.04em; font-size:14px;
      text-transform:none;
    }
    .av-recruiter { background:linear-gradient(180deg,#0DB5FF,#0070F3); }
    .av-family    { background:linear-gradient(180deg,#25E26A,#0AA84B); }
    .av-guest     { background:linear-gradient(180deg,#FFB21E,#FF7A00); }
    .icon{ width:56%; height:56%; display:block }
    .icon svg{ width:100%; height:100%; fill:#fff }
    .hide{ display:none !important; }
    .main{ opacity:0; }
    .main.show{ animation:fadeIn .6s ease forwards; }
    @keyframes fadeIn{ to{ opacity:1 } }
    .navbar{
      position:fixed; inset:0 auto auto 0; width:100%;
      padding:14px clamp(16px,4vw,48px);
      display:flex; align-items:center; gap:32px;
      z-index:1000;
      background:linear-gradient(180deg,rgba(0,0,0,.7) 10%,transparent);
      transition:background .25s ease, box-shadow .25s ease;
    }
    .navbar.scrolled{ background:#0f0f0f; box-shadow:0 2px 0 rgba(255,255,255,.04) inset; }
    .brand{
      background:none; border:0; padding:0; margin:0;
      font-weight:900; color:var(--accent); letter-spacing:-.04em; font-size:clamp(22px,3.2vw,32px);
      cursor:pointer;
      flex-shrink:0;
    }
    .navlinks{display:flex; gap:22px; align-items:center; flex-wrap:wrap; flex:1;}
    .navlinks a{
      color:#e5e5e5; text-decoration:none; font-size:14px; font-weight:600;
    }
    .navlinks a:hover{color:var(--ink-2)}
    /* Move the avatar 0.25in to the left from the edge */
    .profile-avatar{
      position:fixed;
      top:8px;
      right:calc(8px + 0.25in);
      z-index:1100;
      width:40px; height:40px;
      border-radius:6px;
      background:linear-gradient(180deg,#0DB5FF,#0070F3);
      display:grid;
      place-items:center;
      cursor:pointer;
      transition:transform .2s ease;
      flex-shrink:0;
    }
    .profile-avatar:hover{ transform:scale(1.05); }
    .profile-avatar svg{ width:20px; height:20px; fill:#fff; }
    .hero{
      position:relative; min-height:92vh; display:grid; align-items:center;
      padding:0 clamp(16px,4vw,48px); isolation:isolate;
      background:
        linear-gradient(90deg,rgba(0,0,0,.8),rgba(0,0,0,.3)),
        url('https://images.unsplash.com/photo-1518770660439-4636190af475?w=1920&auto=format&fit=crop') center/cover no-repeat;
    }
    .hero::after{
      content:""; position:absolute; left:0; right:0; bottom:-1px; height:160px;
      background:linear-gradient(to top,var(--bg),transparent); z-index:0;
    }
    .hero-content{max-width:720px; position:relative; z-index:1}
    .hero h1{font-size: clamp(32px,8vw,68px); line-height:1.05; margin:0 0 .25em}
    .hero .sub{font-size: clamp(16px,3.2vw,22px); color:var(--muted); margin:0 0 .6em}
    .hero .desc{font-size: clamp(14px,2.6vw,18px); color:#d2d2d2; max-width:54ch; margin:0 0 1em}
    .cta{display:flex; gap:12px; flex-wrap:wrap}
    .btn{
      display:inline-flex; align-items:center; gap:10px; border:0; cursor:pointer;
      font-weight:700; border-radius:4px; padding:12px 22px; transition:filter .15s;
      text-decoration:none;
    }
    .btn:focus{outline:2px solid var(--ring); outline-offset:2px}
    .btn-white{background:#fff; color:#000}
    .btn-white:hover{filter:brightness(.92)}
    .btn-ghost{background:rgba(109,109,110,.7); color:#fff}
    .btn-ghost:hover{filter:brightness(1.1)}
    .section{padding: 28px clamp(16px,4vw,48px) 8px}
    .section-title{font-size:20px; font-weight:700; color:#e5e5e5; margin:0 0 10px}
    .rail{ position:relative; }
    .scroll-btn{
      position:absolute; top:50%; transform:translateY(-50%);
      width:48px; height:48px; border-radius:50%;
      background:rgba(0,0,0,.7); border:2px solid rgba(255,255,255,.2);
      color:#fff; font-size:32px; font-weight:300;
      cursor:pointer; z-index:10;
      display:grid; place-items:center;
      transition:all .2s ease;
      user-select:none;
    }
    .scroll-btn:hover{
      background:rgba(0,0,0,.9);
      border-color:rgba(255,255,255,.4);
      transform:translateY(-50%) scale(1.1);
    }
    .scroll-btn:focus{ outline:2px solid var(--ring); outline-offset:2px; }
    .scroll-left{ left:8px; }
    .scroll-right{ right:8px; }
    .scroller{
      display:flex; gap:10px; overflow-x:auto; overflow-y:hidden; 
      scroll-behavior:smooth; padding-bottom:18px;
      scroll-snap-type: x proximity;
      -webkit-overflow-scrolling: touch;
    }
    .scroller::-webkit-scrollbar{height:8px}
    .scroller::-webkit-scrollbar-track{background:var(--rail)}
    .scroller::-webkit-scrollbar-thumb{background:var(--thumb); border-radius:4px}
    .scroller:focus{outline:2px solid var(--ring); outline-offset:2px}
    .card{
      position:relative; min-width:290px; height:168px; border-radius:8px; overflow:hidden;
      background:#222; scroll-snap-align:start; flex-shrink:0; transform-origin:center; 
      transition:transform .2s ease;
    }
    .card:hover{transform:scale(1.06); z-index:5}
    .thumb{width:100%; height:100%; object-fit:cover}
    .overlay{
      position:absolute; inset:0; padding:16px;
      background:linear-gradient(to top,rgba(0,0,0,.75),rgba(0,0,0,.4));
      opacity:1; transition:opacity .18s ease;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    /* Make all topic titles white */
    .title{font-size:15px; font-weight:800; margin:0; color:#fff;}
    .title.center{ text-align:center; }
    .footer{
      padding:48px clamp(16px,4vw,48px) 32px;
      border-top:1px solid rgba(255,255,255,.1);
      margin-top:48px;
    }
    .footer .links{
      display:flex; gap:16px; flex-wrap:wrap; margin-bottom:24px;
      justify-content:center;
    }
    .footer .links a{
      color:#808080; text-decoration:none; font-size:13px;
      transition:color .2s;
    }
    .footer .links a:hover{ color:#fff; }
    .footer .copyright{ text-align:center; color:#808080; font-size:12px; margin:0; }
  </style>
</head>
<body>
  <div class="netflix-intro" id="clickableIntro" role="button" tabindex="0" aria-label="Enter — click to continue" aria-hidden="false">
    <div class="netflix-logo" aria-label="ANGEL CONTRERAS">
      <h1 class="intro-text">
        <span>A</span><span>N</span><span>G</span><span>E</span><span>L</span><span style="margin-right:0.3em;"> </span><span>C</span><span>O</span><span>N</span><span>T</span><span>R</span><span>E</span><span>R</span><span>A</span><span>S</span>
      </h1>
    </div>
  </div>

  <div id="profiles" class="profiles" role="dialog" aria-labelledby="whosWatching" aria-modal="true">
    <div class="profiles-wrap">
      <h2 id="whosWatching" class="nf">Who's watching?</h2>
      <div class="grid">
        <button class="tile" data-profile="recruiter" data-target="#portfolio" aria-label="Recruiter profile">
          <div class="avatar av-recruiter" aria-hidden="true">
            <span class="icon">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M10 6V5a2 2 0 0 1 2-2h0a2 2 0 0 1 2 2v1h3a3 3 0 0 1 3 3v3h-7v1a1 1 0 0 1-2 0V12H2V9a3 3 0 0 1 3-3h5Zm2-1h0a1 1 0 0 0-1 1v1h2V6a1 1 0 0 0-1-1ZM2 13h9v1a1 1 0 0 0 2 0v-1h9v5a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-5Z"/>
              </svg>
            </span>
          </div>
          <span class="label">Recruiter</span>
        </button>
        <button class="tile disabled" data-profile="family" data-target="#home" aria-label="Friends and Family profile" aria-disabled="true" tabindex="-1">
          <div class="avatar av-family" aria-hidden="true">
            <span class="icon">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M16 11a4 4 0 1 0-4-4 4 4 0 0 0 4 4Zm-8 2a4 4 0 1 0-4-4 4 4 0 0 0 4 4Zm8 2c-3.31 0-6 1.79-6 4v1h12v-1c0-2.21-2.69-4-6-4Zm-8 0c-3.31 0-6 1.79-6 4v1h8v-1c0-1.03.39-1.97 1.07-2.76A7.2 7.2 0 0 0 8 15Z"/>
              </svg>
            </span>
          </div>
          <span class="label">Friends / Family</span>
        </button>
        <button class="tile disabled" data-profile="guest" data-target="#home" aria-label="Guest profile" aria-disabled="true" tabindex="-1">
          <div class="avatar av-guest" aria-hidden="true">
            <span class="icon">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2Zm-3.5 9a1.5 1.5 0 1 1 1.5-1.5A1.5 1.5 0 0 1 8.5 11Zm9 2.5a5.5 5.5 0 0 1-11 0 1 1 0 0 1 2 0 3.5 3.5 0 0 0 7 0 1 1 0  0 1 2 0ZM15.5 11A1.5 1.5 0 1 1 17 9.5 1.5 1.5 0 0 1 15.5 11Z"/>
              </svg>
            </span>
          </div>
          <span class="label">Guest</span>
        </button>
      </div>
    </div>
  </div>

  <div class="main" id="appRoot">
    <nav class="navbar" id="navbar">
      <button class="brand nf" id="brandHome" aria-label="Reset to intro">Angel Contreras</button>
      <div class="navlinks" role="navigation" aria-label="Primary">
        <a href="#home" id="navHome">Home</a>
        <a href="#portfolio" id="navPortfolio">Portfolio</a>
        <a href="skills.html">Skills</a>
        <a href="projects.html">Projects</a>
        <a id="hireLink" href="contact.html">Hire Me</a>
      </div>
      <button class="profile-avatar" id="profileAvatar" aria-label="Recruiter profile" title="Recruiter">
        <svg viewBox="0 0 24 24"><path d="M10 6V5a2 2 0 0 1 2-2h0a2 2 0 0 1 2 2v1h3a3 3 0 0 1 3 3v3h-7v1a1 1 0 0 1-2 0V12H2V9a3 3 0 0 1 3-3h5Zm2-1h0a1 1 0 0 0-1 1v1h2V6a1 1 0 0 0-1-1ZM2 13h9v1a1 1 0 0 0 2 0v-1h9v5a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-5Z"/></svg>
      </button>
    </nav>

    <header class="hero" id="home">
      <div class="hero-content">
        <h1 class="nf" style="white-space:nowrap">ANGEL CONTRERAS - CSULA STUDENT</h1>
        <p class="sub">Bachelor's in Computer Information Systems</p>
        <p class="desc">Passionate about building innovative solutions and creating seamless digital experiences. Breaking into tech, one project at a time.</p>
        <div class="cta">
          <a class="btn btn-white" href="AngelResume.pdf" target="_blank" rel="noopener"><span aria-hidden="true">▶</span> Resume</a>
          <a class="btn btn-ghost" href="https://www.linkedin.com/in/angel-contreras-488539195/" target="_blank" rel="noopener"><span aria-hidden="true">ℹ</span> LinkedIn</a>
        </div>
      </div>
    </header>

    <section class="section" id="portfolio">
      <h2 class="section-title">Today's Top Picks for Recruiter</h2>
      <div class="rail">
        <button class="scroll-btn scroll-left" aria-label="Scroll left">‹</button>
        <div class="scroller" tabindex="0" aria-label="Portfolio carousel">
          <a href="gaurdcard.html" class="card" style="text-decoration:none; cursor:pointer">
            <img class="thumb" alt="Guard Card" loading="lazy" src="https://images.unsplash.com/photo-1568605117036-5fe5e7bab0b7?w=1000&auto=format&fit=crop">
            <div class="overlay">
              <h3 class="title center">Guard Card</h3>
            </div>
          </a>
          <a href="skills.html" class="card" style="text-decoration:none; cursor:pointer">
            <img class="thumb" alt="Skills" loading="lazy" src="https://images.unsplash.com/photo-1517694712202-14dd9538aa97?w=1000&auto=format&fit=crop">
            <div class="overlay">
              <h3 class="title center">Skills</h3>
            </div>
          </a>
          <a href="experience.html" class="card" style="text-decoration:none; cursor:pointer">
            <img class="thumb" alt="Experience" loading="lazy" src="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?w=1000&auto=format&fit=crop">
            <div class="overlay">
              <h3 class="title center">Experience</h3>
            </div>
          </a>
          <a href="certifications.html" class="card" style="text-decoration:none; cursor:pointer">
            <img class="thumb" alt="Certifications" loading="lazy" src="https://images.unsplash.com/photo-1434030216411-0b793f4b4173?w=1000&auto=format&fit=crop">
            <div class="overlay">
              <h3 class="title center">Certifications</h3>
            </div>
          </a>
        </div>
        <button class="scroll-btn scroll-right" aria-label="Scroll right">›</button>
      </div>
    </section>

    <section class="section" id="skills">
      <h2 class="section-title">Continue Watching for Recruiter</h2>
      <div class="rail">
        <button class="scroll-btn scroll-left" aria-label="Scroll skills left">‹</button>
        <div class="scroller" tabindex="0" aria-label="Skills carousel">
          <a href="moviesshows.html" class="card" style="text-decoration:none; cursor:pointer">
            <img class="thumb" alt="Movies & Shows" loading="lazy" src="https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=1000&auto=format&fit=crop">
            <div class="overlay">
              <h3 class="title center">Movies & Shows</h3>
            </div>
          </a>
          <a href="videogames.html" class="card" style="text-decoration:none; cursor:pointer">
            <img class="thumb" alt="Video Games" loading="lazy" src="https://images.unsplash.com/photo-1511512578047-dfb367046420?w=1000&auto=format&fit=crop">
            <div class="overlay">
              <h3 class="title center">Video Games</h3>
            </div>
          </a>
          <a href="blog.html" class="card" style="text-decoration:none; cursor:pointer">
            <img class="thumb" alt="Blogs" loading="lazy" src="https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?w=1000&auto=format&fit=crop">
            <div class="overlay">
              <h3 class="title center">Blogs</h3>
            </div>
          </a>
          <a id="contactCardLink" href="contact.html" class="card" style="text-decoration:none; cursor:pointer">
            <img class="thumb" alt="Contact Me" loading="lazy" src="https://images.unsplash.com/photo-1423666639041-f56000c27a9a?w=1000&auto=format&fit=crop">
            <div class="overlay">
              <h3 class="title center">Contact Me</h3>
            </div>
          </a>
        </div>
        <button class="scroll-btn scroll-right" aria-label="Scroll skills right">›</button>
      </div>
    </section>

    <footer class="footer">
      <nav class="links" aria-label="Footer">
        <a href="mailto:angel@example.com">Email</a>
        <a href="https://www.linkedin.com/in/angel-contreras-488539195/" target="_blank" rel="noopener">LinkedIn</a>
        <a href="https://github.com" target="_blank" rel="noopener">GitHub</a>
        <a href="#portfolio">Portfolio</a>
        <!-- Make Skills/Projects go to their tabs (pages), not home/hash -->
        <a href="skills.html">Skills</a>
        <a href="projects.html">Projects</a>
        <a href="contact.html">Hire Me</a>
        <a href="#home" id="footerHome">Back to top</a>
      </nav>
      <p class="copyright">© <span id="year"></span> Angel Contreras. All rights reserved.</p>
    </footer>
  </div>

  <script>
    (function() {
      if (history.scrollRestoration) {
        history.scrollRestoration = 'manual';
      }
      window.scrollTo(0, 0);
      document.documentElement.scrollTop = 0;
      document.body.scrollTop = 0;
    })();

    const navbar = document.getElementById('navbar');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 80) navbar.classList.add('scrolled');
      else navbar.classList.remove('scrolled');
    }, { passive: true });

    document.getElementById('year').textContent = new Date().getFullYear();

    // Play the sound only once at the very beginning of the session (per tab)
    async function playTaDum(){
      try {
        if (sessionStorage.getItem('taDumPlayed')) return;
        const audio = new Audio('soundn.mp3');
        audio.volume = 0.6;
        await audio.play();
        sessionStorage.setItem('taDumPlayed', '1');
      } catch (err) {
        console.log('Audio playback failed:', err);
      }
    }

    function setupRail(rail){
      const scroller = rail.querySelector('.scroller');
      const left = rail.querySelector('.scroll-left');
      const right = rail.querySelector('.scroll-right');
      if (!scroller || !left || !right) return;
      
      const step = () => {
        const cardWidth = 290;
        the_gap = 10;
        return cardWidth + the_gap;
      };
      
      left.addEventListener('click', () => {
        scroller.scrollBy({left: -step(), behavior: 'smooth'});
      });
      
      right.addEventListener('click', () => {
        scroller.scrollBy({left: step(), behavior: 'smooth'});
      });
      
      scroller.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight') { 
          e.preventDefault(); 
          scroller.scrollBy({left: step(), behavior: 'smooth'}); 
        }
        if (e.key === 'ArrowLeft') { 
          e.preventDefault(); 
          scroller.scrollBy({left: -step(), behavior: 'smooth'}); 
        }
      });
      
      const updateBtns = () => {
        const max = scroller.scrollWidth - scroller.clientWidth - 1;
        left.style.display = scroller.scrollLeft <= 2 ? 'none' : 'grid';
        right.style.display = scroller.scrollLeft >= max ? 'none' : 'grid';
      };
      
      scroller.addEventListener('scroll', updateBtns, { passive: true });
      new ResizeObserver(updateBtns).observe(scroller);
      updateBtns();
    }
    
    document.querySelectorAll('.rail').forEach(setupRail);

    const introSel = '.netflix-intro';
    const profiles = document.getElementById('profiles');
    const appRoot = document.getElementById('appRoot');
    let afterIntroTimer = null;

    function showProfiles(){
      profiles.classList.add('show');
      // Removed any automatic focus to honor "no autofocus" and preserve top-to-bottom reading order
    }
    
    function hideProfiles(){ 
      profiles.classList.remove('show'); 
    }
    
    function showMain(){ 
      appRoot.classList.add('show'); 
    }
    
    function hideMain(){
      appRoot.classList.remove('show'); 
    }

    function kickIntro(){
      let started = false;
      const start = async () => {
        if (started) return; 
        started = true;
        try { await playTaDum(); } catch {}
        window.removeEventListener('click', start);
        window.removeEventListener('keydown', start);
        window.removeEventListener('touchstart', start);
      };
      setTimeout(start, 300);
      window.addEventListener('click', start, { once: true });
      window.addEventListener('keydown', start, { once: true });
      window.addEventListener('touchstart', start, { once: true });
    }

    function scheduleAfterIntro(){
      if (afterIntroTimer) clearTimeout(afterIntroTimer);
      afterIntroTimer = setTimeout(() => { showProfiles(); }, 2700);
    }

    function replayIntro(){
      const intro = document.querySelector(introSel);
      const parent = intro.parentNode;
      const clone = intro.cloneNode(true);
      parent.replaceChild(clone, intro);
      makeIntroClickable();
    }

    function resetToIntro(){
      hideProfiles();
      hideMain();
      window.scrollTo({ top: 0, behavior: 'auto' });
      replayIntro();
      kickIntro();
      scheduleAfterIntro();
    }

    function handleProfileClick(e){
      if (this.classList.contains('disabled') || this.getAttribute('aria-disabled') === 'true'){
        e && e.preventDefault();
        return;
      }
      const target = this.getAttribute('data-target') || '#portfolio';
      hideProfiles(); 
      showMain();
      setTimeout(() => {
        const el = document.querySelector(target);
        if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }, 100);
    }

    document.querySelectorAll('.tile').forEach(btn => {
      btn.addEventListener('click', handleProfileClick);
      btn.addEventListener('keydown', (e) => {
        if (btn.classList.contains('disabled')) return;
        if (e.key === 'Enter' || e.key === ' ') { 
          e.preventDefault(); 
          handleProfileClick.call(btn, e); 
        }
      });
    });

    document.getElementById('brandHome').addEventListener('click', resetToIntro);

    const navHome = document.getElementById('navHome');
    const footerHome = document.getElementById('footerHome');
    const profileAvatar = document.getElementById('profileAvatar');
    
    function openProfilesFromNav(e){
      e.preventDefault();
      hideMain();
      showProfiles();
      window.scrollTo({ top: 0, behavior: 'auto' });
    }
    
    navHome.addEventListener('click', openProfilesFromNav);
    footerHome.addEventListener('click', openProfilesFromNav);
    profileAvatar.addEventListener('click', openProfilesFromNav);

    // Make the intro itself clickable to continue immediately
    function makeIntroClickable(){
      const intro = document.getElementById('clickableIntro');
      if (!intro) return;
      const skip = () => {
        intro.style.display = 'none';
        showProfiles();
      };
      intro.addEventListener('click', skip, { once: true });
      intro.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); skip(); }
      }, { once: true });
    }

    // If landing on a deep link, skip intro so it doesn't bounce
    function maybeSkipIntroForHash(){
      const wanted = ['#skills', '#projects', '#portfolio'];
      if (wanted.includes(location.hash)) {
        const intro = document.querySelector(introSel);
        if (intro) intro.style.display = 'none';
        hideProfiles();
        showMain();
      }
    }

    window.addEventListener('DOMContentLoaded', () => {
      document.documentElement.scrollTop = 0;
      document.body.scrollTop = 0;
      window.scrollTo(0, 0);
      
      if ('scrollRestoration' in history) {
        history.scrollRestoration = 'manual';
      }
      
      makeIntroClickable();
      maybeSkipIntroForHash();
      kickIntro();
      if (!['#skills','#projects','#portfolio'].includes(location.hash)) {
        scheduleAfterIntro();
      }
    });

    window.addEventListener('pageshow', () => {
      document.documentElement.scrollTop = 0;
      document.body.scrollTop = 0;
      window.scrollTo(0, 0);
    });

    window.addEventListener('beforeunload', () => {
      document.documentElement.scrollTop = 0;
      document.body.scrollTop = 0;
    });

    window.addEventListener('DOMContentLoaded', () => {
      let n = 0;
      const guard = setInterval(() => {
        window.scrollTo(0, 0);
        if (++n > 8) clearInterval(guard);
      }, 50);
      
      if (location.hash) {
        requestAnimationFrame(() => window.scrollTo(0, 0));
      }
    });

    window.addEventListener('DOMContentLoaded', () => {
      const hire = document.getElementById('hireLink');
      const contactCard = document.getElementById('contactCardLink');
      if (hire && contactCard) {
        contactCard.setAttribute('href', hire.getAttribute('href') || '#');
        const tgt = hire.getAttribute('target'); 
        if (tgt) contactCard.setAttribute('target', tgt);
        const rel = hire.getAttribute('rel'); 
        if (rel) contactCard.setAttribute('rel', rel);
      }
    });
  </script>
</body>
</html>
